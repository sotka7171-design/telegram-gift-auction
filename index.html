<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Telegram Gift Auction Demo</title>

<style>
body {
  background: #0f0f0f;
  color: #fff;
  font-family: Arial, sans-serif;
  padding: 20px;
}

h1 { margin-bottom: 5px; }
p { color: #bbb; }

#timer {
  font-size: 42px;
  margin: 15px 0;
}

#bar-container {
  width: 300px;
  height: 10px;
  background: #333;
  margin-bottom: 20px;
}

#bar {
  height: 100%;
  width: 100%;
  background: #00bfff;
  transition: width 1s linear, background 0.3s;
}

button {
  padding: 8px 14px;
  margin-right: 10px;
  cursor: pointer;
}

#log {
  margin-top: 20px;
  background: #111;
  padding: 10px;
  max-width: 400px;
  height: 200px;
  overflow-y: auto;
  font-size: 14px;
  border: 1px solid #333;
}
</style>
</head>

<body>

<h1>Telegram Gift Auction</h1>
<p>Backend Auction Challenge demo</p>

<h2>Round <span id="round">1</span></h2>
<p>Highest bid: <span id="bid">0</span> TON</p>

<div id="timer">60</div>

<div id="bar-container">
  <div id="bar"></div>
</div>

<button onclick="placeBid()">Place bid</button>

<div id="log"></div>

<script>
let round = 1;
let bid = 0;
let timeLeft = 60;
let interval = null;

const logEl = document.getElementById("log");

function log(text) {
  const div = document.createElement("div");
  div.textContent = text;
  logEl.appendChild(div);
  logEl.scrollTop = logEl.scrollHeight;
}

function startTimer() {
  clearInterval(interval);
  timeLeft = 60;
  updateUI();
  log(`ðŸŸ¢ Round ${round} started`);

  interval = setInterval(() => {
    timeLeft--;
    updateUI();

    if (timeLeft <= 0) {
      clearInterval(interval);
      endRound();
    }
  }, 1000);
}

function endRound() {
  log(`ðŸ Round ${round} ended. Winning bid: ${bid} TON`);
  setTimeout(() => {
    nextRound();
  }, 2000);
}

function updateUI() {
  document.getElementById("round").textContent = round;
  document.getElementById("bid").textContent = bid;
  document.getElementById("timer").textContent = timeLeft;

  const bar = document.getElementById("bar");
  const percent = (timeLeft / 60) * 100;
  bar.style.width = percent + "%";
  bar.style.background = timeLeft <= 10 ? "red" : "#00bfff";
}

function placeBid() {
  bid++;
  log(`ðŸ’° Bid placed: ${bid} TON`);

  // anti-sniping
  if (timeLeft <= 10) {
    timeLeft = 20;
    log("â± Anti-sniping: time extended to 20s");
  }

  updateUI();
}

function nextRound() {
  round++;
  bid = 0;
  startTimer();
}

startTimer();
</script>

</body>
</html>
