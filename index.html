<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Telegram Gift Auction Demo</title>

<style>
body {
  background:#0f0f0f;
  color:#fff;
  font-family:Arial,sans-serif;
  padding:20px;
}

h1 { margin-bottom:5px }
p { color:#aaa }

#timer {
  font-size:48px;
  margin:15px 0;
}

#bar-container {
  width:320px;
  height:10px;
  background:#333;
}

#bar {
  height:100%;
  width:100%;
  background:#00bfff;
  transition:width 1s linear;
}

button {
  margin-top:15px;
  padding:8px 16px;
}

#log {
  margin-top:20px;
  background:#111;
  border:1px solid #333;
  padding:10px;
  height:220px;
  overflow-y:auto;
  font-size:14px;
}
</style>
</head>

<body>

<h1>Telegram Gift Auction</h1>
<p>Backend Auction Challenge demo</p>

<h2>Round <span id="round">1</span></h2>
<p>Highest bid: <span id="bid">0</span> TON</p>
<p>Total bids this round: <span id="count">0</span></p>

<div id="timer">60</div>
<div id="bar-container"><div id="bar"></div></div>

<button onclick="placeBid('You')">Place bid</button>

<div id="log"></div>

<script>
let round = 1;
let bid = 0;
let timeLeft = 60;
let bidsCount = 0;
let timer;
let botTimer;

const logEl = document.getElementById("log");

function log(text) {
  const d = document.createElement("div");
  d.textContent = text;
  logEl.appendChild(d);
  logEl.scrollTop = logEl.scrollHeight;
}

function updateUI() {
  document.getElementById("round").textContent = round;
  document.getElementById("bid").textContent = bid;
  document.getElementById("count").textContent = bidsCount;
  document.getElementById("timer").textContent = timeLeft;
  document.getElementById("bar").style.width = (timeLeft/60*100) + "%";
}

function startRound() {
  clearInterval(timer);
  clearInterval(botTimer);

  timeLeft = 60;
  bid = 0;
  bidsCount = 0;
  log(`ðŸŸ¢ Round ${round} started`);
  updateUI();

  timer = setInterval(() => {
    timeLeft--;
    updateUI();
    if (timeLeft <= 0) endRound();
  }, 1000);

  botTimer = setInterval(botBid, 2000);
}

function placeBid(who) {
  bid++;
  bidsCount++;
  log(`ðŸ’° ${who} bid ${bid} TON`);

  if (timeLeft <= 10) {
    timeLeft = 20;
    log("â± Anti-sniping +20s");
  }
  updateUI();
}

function botBid() {
  if (Math.random() < 0.7 && timeLeft > 0) {
    placeBid("ðŸ¤– Bot");
  }
}

function endRound() {
  clearInterval(timer);
  clearInterval(botTimer);
  log(`ðŸ Round ${round} ended. Winner bid: ${bid} TON`);
  setTimeout(() => {
    round++;
    startRound();
  }, 3000);
}

startRound();
</script>

</body>
</html>
